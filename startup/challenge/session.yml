name: icuas_ch
root: ./
startup_window: roscore
pre_window: |
  export UAV_NAMESPACE=red;
windows:
  - roscore:
      layout:
      panes:
        - roscore
        - export SITL_RITW_TERMINAL="tmux new-window -d -n:ardupilot1"; waitForRos;
          roslaunch ardupilot_gazebo sim_vehicle.launch
          enable_console:=false
          additional_arguments:="--no-rebuild"
        - |
          waitForRos
          rosparam set use_sim_time true
          waitForSimulation
          roslaunch ardupilot_gazebo generate_mavros_config.launch
          roslaunch ardupilot_gazebo mavros.launch
  - gazebo:
      layout: tiled
      panes:
        - waitForRos; roslaunch ardupilot_gazebo kopterworx.launch
          use_sim_time:=true
          x:=1 y:=1
          world:=$(rospack find icuas24_competition)/worlds/well_lit.world
        - waitForRos; waitForSimulation; roslaunch icuas24_competition spawn_greenhouse_world.launch
        - |
          waitForRos
          waitForSimulation
          sleep 2
          roslaunch icuas24_competition spawn_plant.launch name:=plant_1 model_name:=pepper_3 x:=4.0 y:=4.5 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_2 model_name:=tomato_3 x:=4.0 y:=6.0 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_3 model_name:=plant x:=4.0 y:=7.5 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_4 model_name:=pepper_1 x:=4.0 y:=12.0 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_5 model_name:=eggplant_2 x:=4.0 y:=13.5 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_6 model_name:=eggplant_3 x:=4.0 y:=15.0 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_7 model_name:=pepper_2 x:=4.0 y:=19.5 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_8 model_name:=plant x:=4.0 y:=21.0 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_9 model_name:=eggplant_2 x:=4.0 y:=22.5 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_10 model_name:=eggplant_3 x:=4.0 y:=4.5 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_11 model_name:=pepper_2 x:=4.0 y:=6.0 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_12 model_name:=pepper_3 x:=4.0 y:=7.5 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_13 model_name:=pepper_2 x:=4.0 y:=12.0 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_14 model_name:=pepper_4 x:=4.0 y:=13.5 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_15 model_name:=tomato_3 x:=4.0 y:=15.0 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_16 model_name:=eggplant_1 x:=4.0 y:=19.5 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_17 model_name:=eggplant_2 x:=4.0 y:=21.0 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_18 model_name:=eggplant_3 x:=4.0 y:=22.5 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_19 model_name:=eggplant_3 x:=4.0 y:=4.5 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_20 model_name:=pepper_1 x:=4.0 y:=6.0 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_21 model_name:=pepper_4 x:=4.0 y:=7.5 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_22 model_name:=plant x:=4.0 y:=12.0 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_23 model_name:=eggplant_2 x:=4.0 y:=13.5 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_24 model_name:=eggplant_1 x:=4.0 y:=15.0 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_25 model_name:=tomato_3 x:=4.0 y:=19.5 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_26 model_name:=eggplant_3 x:=4.0 y:=21.0 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_27 model_name:=pepper_2 x:=4.0 y:=22.5 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_28 model_name:=eggplant_1 x:=10.0 y:=4.5 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_29 model_name:=tomato_1 x:=10.0 y:=6.0 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_30 model_name:=eggplant_3 x:=10.0 y:=7.5 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_31 model_name:=eggplant_1 x:=10.0 y:=12.0 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_32 model_name:=pepper_4 x:=10.0 y:=13.5 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_33 model_name:=plant x:=10.0 y:=15.0 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_34 model_name:=pepper_4 x:=10.0 y:=19.5 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_35 model_name:=eggplant_2 x:=10.0 y:=21.0 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_36 model_name:=tomato_1 x:=10.0 y:=22.5 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_37 model_name:=pepper_4 x:=10.0 y:=4.5 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_38 model_name:=eggplant_4 x:=10.0 y:=6.0 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_39 model_name:=eggplant_2 x:=10.0 y:=7.5 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_40 model_name:=eggplant_4 x:=10.0 y:=12.0 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_41 model_name:=pepper_4 x:=10.0 y:=13.5 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_42 model_name:=pepper_4 x:=10.0 y:=15.0 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_43 model_name:=pepper_3 x:=10.0 y:=19.5 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_44 model_name:=tomato_3 x:=10.0 y:=21.0 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_45 model_name:=pepper_2 x:=10.0 y:=22.5 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_46 model_name:=eggplant_1 x:=10.0 y:=4.5 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_47 model_name:=eggplant_2 x:=10.0 y:=6.0 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_48 model_name:=tomato_3 x:=10.0 y:=7.5 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_49 model_name:=pepper_1 x:=10.0 y:=12.0 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_50 model_name:=pepper_2 x:=10.0 y:=13.5 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_51 model_name:=pepper_2 x:=10.0 y:=15.0 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_52 model_name:=pepper_2 x:=10.0 y:=19.5 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_53 model_name:=pepper_2 x:=10.0 y:=21.0 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_54 model_name:=eggplant_3 x:=10.0 y:=22.5 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_55 model_name:=plant x:=16.0 y:=4.5 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_56 model_name:=plant x:=16.0 y:=6.0 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_57 model_name:=pepper_1 x:=16.0 y:=7.5 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_58 model_name:=eggplant_3 x:=16.0 y:=12.0 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_59 model_name:=tomato_1 x:=16.0 y:=13.5 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_60 model_name:=eggplant_3 x:=16.0 y:=15.0 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_61 model_name:=eggplant_1 x:=16.0 y:=19.5 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_62 model_name:=pepper_4 x:=16.0 y:=21.0 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_63 model_name:=eggplant_1 x:=16.0 y:=22.5 z:=1.1 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_64 model_name:=pepper_2 x:=16.0 y:=4.5 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_65 model_name:=eggplant_2 x:=16.0 y:=6.0 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_66 model_name:=tomato_2 x:=16.0 y:=7.5 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_67 model_name:=eggplant_2 x:=16.0 y:=12.0 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_68 model_name:=tomato_1 x:=16.0 y:=13.5 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_69 model_name:=eggplant_1 x:=16.0 y:=15.0 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_70 model_name:=pepper_4 x:=16.0 y:=19.5 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_71 model_name:=pepper_1 x:=16.0 y:=21.0 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_72 model_name:=pepper_1 x:=16.0 y:=22.5 z:=3.9 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_73 model_name:=tomato_3 x:=16.0 y:=4.5 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_74 model_name:=tomato_1 x:=16.0 y:=6.0 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_75 model_name:=tomato_3 x:=16.0 y:=7.5 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_76 model_name:=pepper_3 x:=16.0 y:=12.0 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_77 model_name:=eggplant_4 x:=16.0 y:=13.5 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_78 model_name:=tomato_2 x:=16.0 y:=15.0 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_79 model_name:=pepper_1 x:=16.0 y:=19.5 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_80 model_name:=tomato_1 x:=16.0 y:=21.0 z:=6.699999999999999 yaw:=1.5707
          roslaunch icuas24_competition spawn_plant.launch name:=plant_81 model_name:=eggplant_2 x:=16.0 y:=22.5 z:=6.699999999999999 yaw:=1.5707     
          
          rostopic pub --latch /$UAV_NAMESPACE/plants_beds std_msgs/String "Pepper 10 11 14 21 23 24"
  - arm&takeof:
      layout: tiled
      panes:
        - waitForRos; roslaunch uav_ros_control pid_carrot.launch
          msf_callback_enable:=true
          odometry:=odometry
          control_type:=pid_cascade_node_yawrate
          default_params:=custom_config/position_control_custom.yaml
        - |
          waitForRos
          waitForSysStatus
          waitForSimulation
          rosrun ardupilot_gazebo automatic_takeoff.sh 2 /$UAV_NAMESPACE/odometry
          sleep 5
          rostopic pub --latch /$UAV_NAMESPACE/challenge_started std_msgs/Bool True
  - trajectory:
      layout: tiled
      panes:
        - waitForRos; roslaunch uav_ros_tracker topp_tracker.launch
          tracker_config:=custom_config/topp_config_custom.yaml
  - avader_controller:
      layout: tiled
      panes:
        - waitForRos; roslaunch icuas24_competition challenge.launch
  - topics_listener:
      layout: tiled
      panes:
        - waitForRos; rostopic echo /red/tracker/status
        - waitForRos; rostopic echo /fruit_count
        - waitForRos; rostopic echo /red/tracker/input_pose
        - waitForRos; rostopic echo /red/odometry
